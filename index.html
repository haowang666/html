<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>咽喉与舌肌强化训练助手</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            -webkit-tap-highlight-color: transparent;
            scroll-behavior: smooth;
        }
        .exercise-card {
            transition: all 0.3s ease;
        }
        .exercise-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .pulse-animation {
            animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
        @keyframes pulse-ring {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        .active-exercise {
            border: 2px solid #3b82f6;
            background-color: #eff6ff;
        }
    </style>
</head>
<body class="text-slate-800 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-20">
        <div class="max-w-3xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="bg-blue-600 text-white p-2 rounded-lg">
                    <i class="fas fa-dumbbell text-xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-slate-800 leading-none">止鼾肌能训练</h1>
                    <p class="text-xs text-slate-500 mt-1">软腭 + 舌肌联合强化</p>
                </div>
            </div>
            <button onclick="resetAll()" class="text-sm text-slate-500 hover:text-blue-600 font-medium bg-slate-100 px-3 py-1 rounded-full transition-colors">
                全部重置
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow p-4 max-w-3xl mx-auto w-full space-y-8">
        
        <!-- Intro -->
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
            <p class="text-sm text-blue-900">
                <strong>训练指南：</strong> 请按顺序完成以下两部分训练。建议每天坚持 1-2 次，通常 4-6 周可见效。
            </p>
        </div>

        <!-- Part 1: Soft Palate -->
        <section>
            <div class="flex items-center gap-3 mb-4 ml-1">
                <span class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm">1</span>
                <h2 class="text-xl font-bold text-slate-700">软腭强化 (针对打鼾声响)</h2>
            </div>
            
            <div class="space-y-6">
                <!-- Exercise 1: Vowel A -->
                <div id="card-1" class="exercise-card bg-white rounded-xl shadow-sm p-6 border border-slate-100 relative overflow-hidden">
                    <div class="flex justify-between items-start mb-4 relative z-10">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">1. 发元音 "A"</h3>
                            <p class="text-sm text-slate-500">提拉悬雍垂 (小舌头)</p>
                        </div>
                        <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium">20 次</span>
                    </div>

                    <div class="mb-6 text-slate-600 text-sm leading-relaxed relative z-10">
                        <p>张大嘴发短促有力的“阿”音，感受小舌头上提。</p>
                    </div>

                    <!-- Interactive Area -->
                    <div class="flex flex-col items-center justify-center bg-slate-50 rounded-lg p-6 relative z-10">
                        <div id="visual-cue-1" class="w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center mb-4 transition-all duration-200">
                            <span id="counter-1" class="text-2xl font-bold text-slate-400">0/20</span>
                        </div>
                        <div class="flex gap-3 w-full sm:w-auto">
                            <button id="btn-start-1" onclick="toggleRhythm(1, 20, 2000, 0.5)" class="flex-1 sm:flex-none bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm">
                                <i class="fas fa-play mr-2"></i>开始
                            </button>
                            <button onclick="resetExercise(1)" class="bg-white border border-slate-300 text-slate-500 px-3 py-2 rounded-lg hover:bg-slate-50">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                        <p id="status-1" class="mt-2 text-sm text-indigo-600 font-bold h-5 opacity-0 transition-opacity">准备...</p>
                    </div>
                </div>

                <!-- Exercise 2: Cheek Puff -->
                <div id="card-2" class="exercise-card bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">2. 干漱口 (Cheek Puff)</h3>
                            <p class="text-sm text-slate-500">强化软腭闭合力</p>
                        </div>
                        <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium">45 秒</span>
                    </div>

                    <div class="mb-6 text-slate-600 text-sm">
                        <p>鼓起腮帮子，用力将空气在左右脸颊间来回挤压，保持不漏气。</p>
                    </div>

                    <!-- Interactive Area -->
                    <div class="flex flex-col items-center justify-center bg-slate-50 rounded-lg p-6">
                        <div class="relative w-24 h-24 mb-4">
                            <svg class="w-full h-full" viewBox="0 0 100 100">
                                <circle class="text-slate-200 stroke-current" stroke-width="8" cx="50" cy="50" r="40" fill="transparent"></circle>
                                <circle id="progress-ring-2" class="text-teal-500 progress-ring__circle stroke-current" stroke-width="8" stroke-linecap="round" cx="50" cy="50" r="40" fill="transparent" stroke-dasharray="251.2" stroke-dashoffset="0"></circle>
                            </svg>
                            <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center">
                                <span id="timer-text-2" class="text-2xl font-bold text-slate-700">45</span>
                            </div>
                        </div>

                        <div class="flex gap-3 w-full sm:w-auto">
                            <button id="btn-start-2" onclick="toggleTimer(2, 45)" class="flex-1 sm:flex-none bg-teal-600 hover:bg-teal-700 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm">
                                <i class="fas fa-play mr-2"></i>计时
                            </button>
                            <button onclick="resetTimer(2, 45)" class="bg-white border border-slate-300 text-slate-500 px-3 py-2 rounded-lg hover:bg-slate-50">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Exercise 3: Tongue Down -->
                <div id="card-3" class="exercise-card bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">3. 舌根下压</h3>
                            <p class="text-sm text-slate-500">扩张口咽腔</p>
                        </div>
                        <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium">20 次</span>
                    </div>

                    <div class="mb-6 text-slate-600 text-sm">
                        <p>舌尖抵住下门牙内侧，舌根用力下压发“伊(E)”音。</p>
                    </div>

                    <div class="flex flex-col items-center justify-center bg-slate-50 rounded-lg p-6">
                         <div id="visual-cue-3" class="w-full h-8 bg-slate-200 rounded-full mb-4 overflow-hidden relative">
                            <div id="progress-bar-3" class="h-full bg-rose-500 w-0 transition-all duration-300 ease-out"></div>
                        </div>
                        
                        <div class="flex gap-3 w-full sm:w-auto">
                            <button id="btn-start-3" onclick="toggleRhythm(3, 20, 3000, 0.6)" class="flex-1 sm:flex-none bg-rose-600 hover:bg-rose-700 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm">
                                <i class="fas fa-play mr-2"></i>开始
                            </button>
                            <button onclick="resetExercise(3)" class="bg-white border border-slate-300 text-slate-500 px-3 py-2 rounded-lg hover:bg-slate-50">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                        <div class="flex justify-between w-full mt-2 px-1">
                             <p id="status-3" class="text-sm text-rose-600 font-bold opacity-0 transition-opacity">准备...</p>
                             <span id="counter-3" class="text-sm font-bold text-slate-400">0/20</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Part 2: Tongue Muscles -->
        <section>
            <div class="flex items-center gap-3 mb-4 mt-8 ml-1">
                <span class="bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-sm">2</span>
                <h2 class="text-xl font-bold text-slate-700">舌肌训练 (防止舌后坠)</h2>
            </div>

            <div class="space-y-6">
                <!-- Exercise 4: Tongue Slide -->
                <div id="card-4" class="exercise-card bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">4. 舌头滑梯 (Tongue Slide)</h3>
                            <p class="text-sm text-slate-500">锻炼舌头控制力</p>
                        </div>
                        <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium">20 次</span>
                    </div>

                    <div class="mb-6 text-slate-600 text-sm">
                        <p>舌尖抵住上颚，舌体向后卷动滑动，像滑滑梯一样。</p>
                    </div>

                    <div class="flex flex-col items-center justify-center bg-orange-50 rounded-lg p-6 border border-orange-100">
                        <div class="flex items-center gap-4 mb-4">
                            <i class="fas fa-arrow-left text-orange-300 text-xl" id="arrow-left-4"></i>
                            <div id="visual-cue-4" class="w-16 h-16 rounded-full bg-white border-4 border-orange-200 flex items-center justify-center transition-all duration-300">
                                <i class="fas fa-comment text-orange-400 text-2xl"></i>
                            </div>
                            <i class="fas fa-arrow-right text-orange-300 text-xl opacity-0"></i> <!-- Placeholder for centering -->
                        </div>
                        
                        <div class="flex gap-3 w-full sm:w-auto">
                            <button id="btn-start-4" onclick="toggleRhythm(4, 20, 4000, 0.5)" class="flex-1 sm:flex-none bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm">
                                <i class="fas fa-play mr-2"></i>开始
                            </button>
                            <button onclick="resetExercise(4)" class="bg-white border border-slate-300 text-slate-500 px-3 py-2 rounded-lg hover:bg-slate-50">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                         <div class="flex justify-between w-full mt-2 px-1">
                             <p id="status-4" class="text-sm text-orange-600 font-bold opacity-0 transition-opacity">准备...</p>
                             <span id="counter-4" class="text-sm font-bold text-slate-400">0/20</span>
                        </div>
                    </div>
                </div>

                <!-- Exercise 5: Roof Press -->
                <div id="card-5" class="exercise-card bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">5. 舌头上推 (Roof Press)</h3>
                            <p class="text-sm text-slate-500">核心力量 (长按保持)</p>
                        </div>
                        <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium">10 次</span>
                    </div>

                    <div class="mb-6 text-slate-600 text-sm">
                        <p>整个舌头完全吸附在上颚用力向上顶。<strong>注意：每次需保持 10 秒。</strong></p>
                    </div>

                    <div class="flex flex-col items-center justify-center bg-purple-50 rounded-lg p-6 border border-purple-100">
                        <div id="visual-cue-5" class="w-full h-3 bg-purple-200 rounded-full mb-4 overflow-hidden">
                             <div id="hold-bar-5" class="h-full bg-purple-600 w-0"></div>
                        </div>
                        
                        <div class="flex gap-3 w-full sm:w-auto">
                            <button id="btn-start-5" onclick="toggleRhythm(5, 10, 13000, 0.77)" class="flex-1 sm:flex-none bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm">
                                <i class="fas fa-play mr-2"></i>开始 (长按)
                            </button>
                            <button onclick="resetExercise(5)" class="bg-white border border-slate-300 text-slate-500 px-3 py-2 rounded-lg hover:bg-slate-50">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                         <div class="flex justify-between w-full mt-2 px-1">
                             <p id="status-5" class="text-sm text-purple-600 font-bold opacity-0 transition-opacity">准备...</p>
                             <span id="counter-5" class="text-sm font-bold text-slate-400">0/10</span>
                        </div>
                    </div>
                </div>

                <!-- Exercise 6: Tongue Stretch -->
                <div id="card-6" class="exercise-card bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">6. 强力伸舌 (Stretch)</h3>
                            <p class="text-sm text-slate-500">拉伸舌根</p>
                        </div>
                        <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium">10 次</span>
                    </div>

                    <div class="mb-6 text-slate-600 text-sm">
                        <p>尽全力把舌头向下巴方向伸出，保持 5 秒，然后放松。</p>
                    </div>

                    <div class="flex flex-col items-center justify-center bg-cyan-50 rounded-lg p-6 border border-cyan-100">
                        <div id="visual-cue-6" class="transition-transform duration-500 mb-4">
                            <i class="fas fa-arrow-down text-cyan-400 text-3xl opacity-30"></i>
                        </div>
                        
                        <div class="flex gap-3 w-full sm:w-auto">
                            <button id="btn-start-6" onclick="toggleRhythm(6, 10, 8000, 0.625)" class="flex-1 sm:flex-none bg-cyan-600 hover:bg-cyan-700 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm">
                                <i class="fas fa-play mr-2"></i>开始 (5秒)
                            </button>
                            <button onclick="resetExercise(6)" class="bg-white border border-slate-300 text-slate-500 px-3 py-2 rounded-lg hover:bg-slate-50">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                         <div class="flex justify-between w-full mt-2 px-1">
                             <p id="status-6" class="text-sm text-cyan-600 font-bold opacity-0 transition-opacity">准备...</p>
                             <span id="counter-6" class="text-sm font-bold text-slate-400">0/10</span>
                        </div>
                    </div>
                </div>

            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-slate-200 mt-8 py-8">
        <div class="max-w-3xl mx-auto px-4 text-center text-slate-400 text-sm">
            <p class="font-medium text-slate-500">坚持就是胜利</p>
            <p class="mt-2 text-xs">注意：本工具仅供辅助训练，不可替代医疗诊断。如有严重呼吸暂停症状请就医。</p>
        </div>
    </footer>

    <script>
        // State management
        const state = {
            1: { active: false, count: 0, interval: null, max: 20 },
            2: { active: false, timeLeft: 45, interval: null, max: 45 },
            3: { active: false, count: 0, interval: null, max: 20 },
            4: { active: false, count: 0, interval: null, max: 20 },
            5: { active: false, count: 0, interval: null, max: 10 },
            6: { active: false, count: 0, interval: null, max: 10 }
        };

        // Generic Rhythm Function (Handles Ex 1, 3, 4, 5, 6)
        // duration: total cycle time in ms
        // holdRatio: decimal % of time spent in "Action" state (default 0.6)
        function toggleRhythm(id, maxReps, duration, holdRatio = 0.6) {
            const btn = document.getElementById(`btn-start-${id}`);
            const status = document.getElementById(`status-${id}`);
            const counter = document.getElementById(`counter-${id}`);
            
            // Highlight active card
            document.querySelectorAll('.exercise-card').forEach(c => c.classList.remove('active-exercise'));
            document.getElementById(`card-${id}`).classList.add('active-exercise');

            if (state[id].active) {
                // Pause Logic
                clearInterval(state[id].interval);
                state[id].active = false;
                btn.innerHTML = '<i class="fas fa-play mr-2"></i>继续';
                
                // UI Cleanups
                if(id===1) document.getElementById('visual-cue-1').classList.remove('pulse-animation', 'bg-indigo-100');
                if(id===5) document.getElementById('hold-bar-5').style.transition = 'none';
                status.style.opacity = '0.5';
                status.innerText = "已暂停";
            } else {
                // Start Logic
                if (state[id].count >= maxReps) {
                    resetExerciseData(id); // Reset count if starting from finished
                }

                state[id].active = true;
                btn.innerHTML = '<i class="fas fa-pause mr-2"></i>暂停';
                status.style.opacity = '1';

                runCycle(); 
                state[id].interval = setInterval(runCycle, duration);

                function runCycle() {
                    if (state[id].count >= maxReps) {
                        finishExercise(id);
                        return;
                    }

                    // --- ACTION START ---
                    let actionText = "用力!";
                    if(id===1) actionText = "发声! (Ah)";
                    if(id===3) actionText = "下压! (E)";
                    if(id===4) actionText = "后卷!";
                    if(id===5) actionText = "用力顶住! (10s)";
                    if(id===6) actionText = "伸出! (5s)";
                    status.innerText = actionText;

                    // Specific UI Triggers for Action
                    if(id===1) {
                        document.getElementById('visual-cue-1').classList.add('scale-110', 'bg-indigo-500'); 
                        counter.classList.add('text-white');
                    }
                    if(id===3) {
                         document.getElementById('visual-cue-3').classList.add('ring-2', 'ring-rose-300');
                         document.getElementById('progress-bar-3').style.width = '100%'; // Simulate pressure
                    }
                    if(id===4) {
                        document.getElementById('visual-cue-4').classList.add('translate-x-6'); // Move right
                        document.getElementById('arrow-left-4').classList.add('text-orange-500');
                    }
                    if(id===5) {
                        // Progress bar filling up for 10s
                        const bar = document.getElementById('hold-bar-5');
                        bar.style.transition = `width ${duration * holdRatio}ms linear`;
                        bar.style.width = '100%';
                    }
                    if(id===6) {
                        document.getElementById('visual-cue-6').classList.add('translate-y-4', 'scale-125');
                        document.querySelector('#visual-cue-6 i').classList.remove('opacity-30');
                    }

                    // --- RELAX START ---
                    setTimeout(() => {
                        if (!state[id].active) return;
                        
                        status.innerText = "放松...";
                        state[id].count++;
                        
                        // Update Counter text
                        counter.innerText = `${state[id].count}/${maxReps}`;

                        // Specific UI Triggers for Relax
                        if(id===1) {
                            const cue = document.getElementById('visual-cue-1');
                            cue.classList.remove('scale-110', 'bg-indigo-500');
                            cue.classList.add('bg-slate-200');
                            counter.classList.remove('text-white');
                        }
                        if(id===3) {
                             document.getElementById('visual-cue-3').classList.remove('ring-2', 'ring-rose-300');
                             document.getElementById('progress-bar-3').style.width = '0%';
                        }
                        if(id===4) {
                            document.getElementById('visual-cue-4').classList.remove('translate-x-6');
                            document.getElementById('arrow-left-4').classList.remove('text-orange-500');
                        }
                        if(id===5) {
                            const bar = document.getElementById('hold-bar-5');
                            bar.style.transition = 'width 0.2s ease-out';
                            bar.style.width = '0%';
                        }
                        if(id===6) {
                            document.getElementById('visual-cue-6').classList.remove('translate-y-4', 'scale-125');
                            document.querySelector('#visual-cue-6 i').classList.add('opacity-30');
                        }

                        if(state[id].count >= maxReps) {
                            setTimeout(() => finishExercise(id), 500);
                        }
                    }, duration * holdRatio);
                }
            }
        }

        // Timer Exercise (Ex 2)
        function toggleTimer(id, maxTime) {
            const btn = document.getElementById(`btn-start-${id}`);
            const ring = document.getElementById(`progress-ring-${id}`);
            const text = document.getElementById(`timer-text-${id}`);
            
            document.querySelectorAll('.exercise-card').forEach(c => c.classList.remove('active-exercise'));
            document.getElementById(`card-${id}`).classList.add('active-exercise');

            const radius = ring.r.baseVal.value;
            const circumference = radius * 2 * Math.PI;

            if (state[id].active) {
                clearInterval(state[id].interval);
                state[id].active = false;
                btn.innerHTML = '<i class="fas fa-play mr-2"></i>继续';
            } else {
                if (state[id].timeLeft <= 0) state[id].timeLeft = maxTime;
                
                state[id].active = true;
                btn.innerHTML = '<i class="fas fa-pause mr-2"></i>暂停';

                state[id].interval = setInterval(() => {
                    state[id].timeLeft--;
                    text.innerText = state[id].timeLeft;
                    const offset = circumference - (state[id].timeLeft / maxTime) * circumference;
                    ring.style.strokeDashoffset = offset;

                    if (state[id].timeLeft <= 0) finishExercise(id);
                }, 1000);
            }
        }

        function finishExercise(id) {
            clearInterval(state[id].interval);
            state[id].active = false;
            
            const btn = document.getElementById(`btn-start-${id}`);
            btn.innerHTML = '<i class="fas fa-check mr-2"></i>完成';
            btn.className = "flex-1 sm:flex-none bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm";
            
            document.getElementById(`card-${id}`).classList.remove('active-exercise');
            document.getElementById(`card-${id}`).classList.add('ring-2', 'ring-green-400');
            
            if (document.getElementById(`status-${id}`)) {
                document.getElementById(`status-${id}`).innerText = "已完成！";
                document.getElementById(`status-${id}`).style.opacity = '1';
                document.getElementById(`status-${id}`).classList.add('text-green-600');
            }
        }

        function resetExerciseData(id) {
            if(id === 2) {
                state[2].timeLeft = 45;
                document.getElementById('timer-text-2').innerText = "45";
                const ring = document.getElementById('progress-ring-2');
                ring.style.strokeDashoffset = 0;
            } else {
                state[id].count = 0;
                const max = state[id].max;
                document.getElementById(`counter-${id}`).innerText = `0/${max}`;
            }
        }

        function resetExercise(id) {
            clearInterval(state[id].interval);
            state[id].active = false;
            
            // Reset Button Style
            const btn = document.getElementById(`btn-start-${id}`);
            btn.innerHTML = id === 5 || id === 6 ? '<i class="fas fa-play mr-2"></i>开始 (长按)' : '<i class="fas fa-play mr-2"></i>开始';
            if(id === 2) btn.innerHTML = '<i class="fas fa-play mr-2"></i>计时';
            
            // Re-apply original colors
            let colorClass = 'bg-indigo-600';
            if(id===2) colorClass = 'bg-teal-600';
            if(id===3) colorClass = 'bg-rose-600';
            if(id===4) colorClass = 'bg-orange-500';
            if(id===5) colorClass = 'bg-purple-600';
            if(id===6) colorClass = 'bg-cyan-600';
            
            btn.className = `flex-1 sm:flex-none ${colorClass} hover:opacity-90 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm`;

            document.getElementById(`card-${id}`).classList.remove('active-exercise', 'ring-2', 'ring-green-400');

            resetExerciseData(id);

            // Specific UI Resets
            if(id===1) {
                document.getElementById('visual-cue-1').className = "w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center mb-4 transition-all duration-200";
                document.getElementById('counter-1').classList.remove('text-white');
            }
            if(id===3) document.getElementById('progress-bar-3').style.width = "0%";
            if(id===4) {
                 document.getElementById('visual-cue-4').classList.remove('translate-x-6');
                 document.getElementById('arrow-left-4').classList.remove('text-orange-500');
            }
            if(id===5) document.getElementById('hold-bar-5').style.width = '0%';
            if(id===6) {
                document.getElementById('visual-cue-6').classList.remove('translate-y-4', 'scale-125');
                document.querySelector('#visual-cue-6 i').classList.add('opacity-30');
            }
            
            if (document.getElementById(`status-${id}`)) {
                document.getElementById(`status-${id}`).style.opacity = '0';
                document.getElementById(`status-${id}`).classList.remove('text-green-600');
            }
        }

        function resetAll() {
            for(let i=1; i<=6; i++) resetExercise(i);
            window.scrollTo(0, 0);
        }
        
        // Init Ring for Ex 2
        const ring = document.getElementById('progress-ring-2');
        const radius = ring.r.baseVal.value;
        const circumference = radius * 2 * Math.PI;
        ring.style.strokeDasharray = `${circumference} ${circumference}`;
        ring.style.strokeDashoffset = 0;
    </script>
</body>
</html>
